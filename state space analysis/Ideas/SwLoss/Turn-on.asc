Version 4
SHEET 1 3960 1420
WIRE 1328 -224 1104 -224
WIRE 272 -208 48 -208
WIRE 1104 -160 1104 -224
WIRE 48 -144 48 -208
WIRE 1328 -64 1328 -224
WIRE 272 -48 272 -208
WIRE 752 -16 704 -16
WIRE 960 -16 832 -16
WIRE 1104 -16 1104 -96
WIRE 1104 -16 960 -16
WIRE 1184 -16 1104 -16
WIRE 1232 -16 1184 -16
WIRE 1248 -16 1232 -16
WIRE -304 0 -352 0
WIRE -48 0 -224 0
WIRE 48 0 48 -80
WIRE 48 0 -48 0
WIRE 128 0 48 0
WIRE 176 0 128 0
WIRE 192 0 176 0
WIRE 1248 0 1248 -16
WIRE -48 16 -48 0
WIRE 192 16 192 0
WIRE 960 16 960 -16
WIRE 1104 32 1104 -16
WIRE 1184 32 1184 -16
WIRE 128 48 128 0
WIRE -208 80 -224 80
WIRE -80 80 -128 80
WIRE -48 80 -80 80
WIRE 0 80 -48 80
WIRE 704 144 704 -16
WIRE 944 144 704 144
WIRE 960 144 960 96
WIRE 960 144 944 144
WIRE 1104 144 1104 96
WIRE 1104 144 960 144
WIRE 1184 144 1184 96
WIRE 1184 144 1104 144
WIRE 1248 144 1248 64
WIRE 1248 144 1184 144
WIRE 1328 144 1328 16
WIRE 1328 144 1248 144
WIRE -352 160 -352 0
WIRE -224 160 -224 80
WIRE -224 160 -352 160
WIRE -112 160 -224 160
WIRE -48 160 -48 144
WIRE -48 160 -112 160
WIRE 48 160 48 96
WIRE 48 160 -48 160
WIRE 128 160 128 112
WIRE 128 160 48 160
WIRE 192 160 192 80
WIRE 192 160 128 160
WIRE 272 160 272 32
WIRE 272 160 192 160
WIRE -32 480 -144 480
WIRE -144 512 -144 480
WIRE 1168 512 1120 512
WIRE 1200 512 1168 512
WIRE 0 544 -32 544
WIRE 32 544 0 544
WIRE 1120 544 1120 512
WIRE 1120 640 1120 624
FLAG -112 160 0
FLAG 176 0 sw
FLAG -80 80 g
FLAG 0 544 g
FLAG -32 608 0
FLAG -144 592 0
FLAG 944 144 0
FLAG 1232 -16 sw2
FLAG 1120 640 0
FLAG 1168 512 Vcex
SYMBOL nmos 0 0 R0
WINDOW 3 60 63 Left 2
SYMATTR Value ""
SYMATTR InstName MN1
SYMATTR Prefix M
SYMATTR SpiceModel testFET
SYMBOL diode 208 80 R180
WINDOW 0 24 64 Invisible 2
WINDOW 3 24 0 Invisible 2
SYMATTR InstName D1
SYMATTR Value ""
SYMATTR SpiceModel myD
SYMBOL diode 64 -80 R180
WINDOW 0 24 64 Invisible 2
WINDOW 3 24 0 Invisible 2
SYMATTR InstName D2
SYMATTR Value ""
SYMATTR SpiceModel myD
SYMBOL cap -64 16 R0
WINDOW 0 24 8 Invisible 2
WINDOW 3 16 7 Left 2
SYMATTR InstName Cgd
SYMATTR Value {Cgd}
SYMBOL cap -64 80 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName Cgs
SYMATTR Value 800p
SYMBOL voltage 272 -64 R0
SYMATTR InstName V3
SYMATTR Value 300
SYMBOL current -304 0 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -32 40 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {IL}
SYMBOL bi -208 80 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -114 26 VBottom 2
SYMATTR InstName B1
SYMATTR Value I=IF(V(g)<10,{Ig},0)
SYMBOL diode -16 544 R180
WINDOW 0 24 64 Invisible 2
WINDOW 3 24 0 Invisible 2
SYMATTR InstName D3
SYMATTR Value ""
SYMATTR SpiceModel myD
SYMBOL diode -16 608 R180
WINDOW 0 24 64 Invisible 2
WINDOW 3 24 0 Invisible 2
SYMATTR InstName D4
SYMATTR Value ""
SYMATTR SpiceModel myD
SYMBOL voltage -144 496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL cap 112 48 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName Cds
SYMATTR Value {Cds}
SYMBOL diode 1264 64 R180
WINDOW 0 24 64 Invisible 2
WINDOW 3 24 0 Invisible 2
SYMATTR InstName D5
SYMATTR Value ""
SYMATTR SpiceModel myD
SYMBOL diode 1120 -96 R180
WINDOW 0 24 64 Invisible 2
WINDOW 3 24 0 Invisible 2
SYMATTR InstName D6
SYMATTR Value ""
SYMATTR SpiceModel myD
SYMBOL voltage 1328 -80 R0
SYMATTR InstName V2
SYMATTR Value 300
SYMBOL current 752 -16 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -32 40 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value {IL}
SYMBOL cap 1088 32 R0
WINDOW 0 24 8 Invisible 2
SYMATTR InstName Cds2
SYMATTR Value {Cds}
SYMBOL bv 1120 528 R0
SYMATTR InstName B2
SYMATTR Value V={(Cds*(Cgd/Cds)*(IL/Ig) - Cds-Ig/IL*Cds)*1G}
SYMBOL current 960 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I3
SYMATTR Value {{IL+{Kp/2}*Ig}}
TEXT -352 -160 Left 2 !.tran 0 100n 0 1p
TEXT -352 312 Left 2 !.model testFET VDMOS(Rg=.1 Rd=0 Rs=0 Vto=3 Kp={Kp} Cgdmax=0p\n+ Cgdmin=0p Cgs=0p Cjo=1.5f Is=26p Rb=0m  Vds=600 Ron=385m Qg=0n)
TEXT -352 264 Left 2 !.model myD D(n=.01)
TEXT -352 -208 Left 2 !.ic V(g)=2.5
TEXT 96 248 Left 2 !;.step param Cds list .1n .25n .5n 1n 2n
TEXT 96 216 Left 2 !.param Cds = 100p
TEXT 1032 208 Left 2 !.ic V(sw2) = 300
TEXT 160 -248 Left 2 !.param Ig = 1
TEXT 176 -288 Left 2 !.param IL=10
TEXT 104 184 Left 2 !.param Cgd = 20p
TEXT 184 -328 Left 2 !.param Kp = 20
